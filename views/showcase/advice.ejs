<!DOCTYPE html>
<html>
  <head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title><%= api.data.advice.title %> - <%= api.data.advice.owner.name %></title>
		<meta name="description" content="<%= api.data.advice.description %>">

		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="application-name" content="Just Good Advice">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-title" content="Just Good Advice">
		<meta name="robots" content="index,follow">
		<meta name="google" content="nositelinkssearchbox">

		<link rel="stylesheet" href="/dist/css/main.css" />
		
		<!--favicons-->
		<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
		<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
		<link rel="manifest" href="/site.webmanifest">
		<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#6d256c">
		<meta name="msapplication-TileColor" content="#ffffff">
		<meta name="theme-color" content="#ffffff">
		<script>window.jga=window.jga||{};window.jga.config={web_host:"<%= locals.WEB_HOST %>",api_host:"<%= locals.API_HOST %>",api_key:"<%= locals.API_KEY %>"};</script>
  </head>
  <body class="showcase showcase--advice">

		<header class="banner bg-stripes">
			<img src="/img/logo_white.svg" height="28">
		</header>

		<div class="container-fluid mt-4">
			<div class="row">
				<div class="col-3">
					<div class="advice-set-details">Loading...</div>
					<div class="assumptions-container rounded" style="display:none;">
						<ul class="nav nav-tabs" id="pills-tab" role="tablist">
							<li class="nav-item" role="presentation">
								<a class="nav-link active" id="pills-vars-tab" data-toggle="pill" href="#pills-vars" role="tab" aria-controls="pills-vars" aria-selected="false">Your Assumptions</a>
							</li>
							<li class="nav-item" role="presentation">
								<a class="nav-link" id="pills-qa-tab" data-toggle="pill" href="#pills-qa" role="tab" aria-controls="pills-qa" aria-selected="true">Your Answers</a>
							</li>
						</ul>
						<div class="tab-content" id="pills-tabContent">
							<div class="tab-pane fade show active" id="pills-vars" role="tabpanel" aria-labelledby="pills-vars-tab">
								<!--<ul class="answersByVariable list-unstyled"></ul>-->
								<ul class="assumptions list-unstyled"></ul>
							</div>
							<div class="tab-pane fade" id="pills-qa" role="tabpanel" aria-labelledby="pills-qa-tab">
								<ul class="answers list-unstyled"></ul>
							</div>
						</div>
					</div>
					<div>
						<small><a href="/s/<%= api.data.advice.id %>/" class="text-muted">Reset</a></small>
					</div>
				</div>
				<div class="col-7">
					<div class="row no-gutters">
						<div class="col-8 p-2">
							<div class="advice rounded bg-white mt-2"></div>
							<div class="list-advice-recommendations"></div>
							<div class="list-advice-todo"></div>
							<div class="list-advice-completed"></div>
							<div class="toggle-mode">
								<a href="#" class="text-muted" data-action="toggle-mode">
									<span>Switch mode</span>
									<i class="fad fa-random"></i>
								</a>
							</div>
						</div>
						<div class="col-4">
							<div class="variables-container rounded" style="display:none;">
								<table class="table table-borderless table-hover table-sm">
									<thead>
										<tr>
											<th>Parameter</th>
											<th class="text-right">Vaue</th>
										</tr>
									</thead>
									<tbody class="variables"></tbody>
								</table>
							</div>
						</div>
					</div>
				</div>

				<div class="col-3">
				</div>
			</div>
		</div>

		<!--templates-->
		<script id="tmpl_adviceSetDetails" type="x-tmpl-mustache">
			<h2><a href="https://app.justgoodadvice.com/advicesets/{{advice._id}}/open-editor" target="_blank" class="text-body">{{advice.title}}</a></h2>
			<p class="lead">{{advice.description}}</p>
		</script>

		<script id="tmpl_recommendationsAdviceList" type="x-tmpl-mustache">
			{{#recommendations.ungrouped.length}}
				<div class="rounded bg-white mt-2">
					<h6>Recommendations</h6>
					<ul class="advice-list recommendations fa-ul">
					{{#recommendations.ungrouped}}
						<li data-id="{{id}}" data-idx="{{idx}}">
							<span class="fa-li">
								<a href="https://app.justgoodadvice.com/advicesets/{{advice._id}}/rules/{{expand.ruleId}}/show?selectedNodeId={{id}}" target="_blank">
									<i class="fad fa-thumbs-up"></i>
								</a>
							</span>
							{{headline}}
						</li>
					{{/recommendations.ungrouped}}
					</ul>
				</div>
			{{/recommendations.ungrouped.length}}
		</script>
		
		<script id="tmpl_recommendationsToDoAdviceList" type="x-tmpl-mustache">
			{{#recommendations.todo.length}}
				<div class="rounded bg-white mt-2">
					<h6>To-Do</h6>
					<ul class="advice-list todo fa-ul">
					{{#recommendations.todo}}
						<li data-id="{{id}}" data-idx="{{idx}}">
							<span class="fa-li">
								<a href="https://app.justgoodadvice.com/advicesets/{{advice._id}}/rules/{{expand.ruleId}}/show?selectedNodeId={{id}}" target="_blank">
									<i class="far fa-circle"></i> 
								</a>
							</span>
							{{headline}}
						</li>
					{{/recommendations.todo}}
					</ul>
				</div>
			{{/recommendations.todo.length}}
		</script>

		<script id="tmpl_recommendationsCompletedAdviceList" type="x-tmpl-mustache">
			{{#recommendations.completed.length}}
				<div class="rounded bg-white mt-2">
					<h6>Completed</h6>
					<ul class="advice-list completed fa-ul">
					{{#recommendations.completed}}
						<li data-id="{{id}}" data-idx="{{idx}}">
							<span class="fa-li">
								<a href="https://app.justgoodadvice.com/advicesets/{{advice._id}}/rules/{{expand.ruleId}}/show?selectedNodeId={{id}}" target="_blank">
									<i class="far fa-check-circle"></i> 
								</a>
							</span>
							{{headline}}
						</li>
					{{/recommendations.completed}}
					</ul>
				</div>
			{{/recommendations.completed.length}}
		</script>

		<script id="tmpl_answersList" type="x-tmpl-mustache">
			{{#answers}}
				<li data-id="{{id}}" data-idx="{{idx}}" class="qa position-relative">
					<div class="q">{{question}}</div>
					<div class="a"><a href="#" class="stretched-link">{{value}}</a></div>
				</li>
			{{/answers}}
		</script>

		<script id="tmpl_answersListByVariable" type="x-tmpl-mustache">
			{{#answers}}
				<li data-id="{{id}}" data-idx="{{idx}}" class="qa position-relative">
					<div class="q">
						{{_count}}.
						{{#expand.form.questionVariable}}
							<span class="text-monospace">{{expand.form.questionVariable.name}}</span>&nbsp;&nbsp;&nbsp;
						{{/expand.form.questionVariable}}
						{{^expand.form.questionVariable}}
							{{question}}
						{{/expand.form.questionVariable}}
					</div>
					<div class="a"><a href="#" class="stretched-link">
						{{#expand.form.questionVariable}}
							{{expand.form.questionVariable.result.value}}
						{{/expand.form.questionVariable}}
						{{^expand.form.questionVariable}}
							{{value}}
						{{/expand.form.questionVariable}}
					</a></div>
				</li>
			{{/answers}}
		</script>

		<script id="tmpl_assumptionsList" type="x-tmpl-mustache">
			{{#answers}}
				<li data-id="{{id}}" data-idx="{{idx}}" class="qa position-relative">
					{{^statement}}
						<div class="q">
							{{_count}}.
							{{#expand.form.questionVariable}}
								<span class="text-monospace">{{expand.form.questionVariable.name}}</span>&nbsp;&nbsp;&nbsp;
							{{/expand.form.questionVariable}}
							{{^expand.form.questionVariable}}
								{{question}}
							{{/expand.form.questionVariable}}
						</div>
						<div class="a"><a href="#" class="stretched-link">
							{{#expand.form.questionVariable}}
								{{expand.form.questionVariable.result.value}}
							{{/expand.form.questionVariable}}
							{{^expand.form.questionVariable}}
								{{value}}
							{{/expand.form.questionVariable}}
						</a></div>
					{{/statement}}
						
					{{#statement}}
						<div class="a statement"><a href="#" class="stretched-link">
							{{_count}}. {{statement}}
						</a></div>
					{{/statement}}
				</li>
			{{/answers}}
		</script>

		<script id="tmpl_variablesList" type="x-tmpl-mustache">
			{{#variables}}
				<tr>
					<td>
						<a href="https://app.justgoodadvice.com/admin/dictionary?preloadId={{id}}" target="_blank"  title="{{name}}">
							{{name}}
						</a>
					</td>
					<td class="text-right" title="{{value}}">
						{{^format}}
							{{value}}
						{{/format}}
						{{#format}}
							{{valueF}}
						{{/format}}
					</td>
				</tr>
			{{/variables}}
		</script>

		<script id="tmpl_adviceInputRequest" type="x-tmpl-mustache">
			<div class="question">
				<header class="d-flex justify-content-between icon-row">
					{{#display.explanation}}
						<div>
						<p class="lead">{{display.explanation}}</p>
						<h3>{{display.question}}</h3>
						</div>
					{{/display.explanation}}
					{{^display.explanation}}
						<h3>{{display.question}}</h3>
					{{/display.explanation}}
					<div class="dropdown">
						<a class="btn btn-sm btn-light" href="#" role="button" id="dropdownMenuLink{{display.id}}" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
							<i class="far fa-ellipsis-h"></i>
						</a>

						<div class="dropdown-menu" aria-labelledby="dropdownMenuLink{{display.id}}">
							<div class="dropdown-header">ADVICE BUILDER</div>
							<a href="https://app.justgoodadvice.com/advicesets/{{advice._id}}/rules/{{display.ruleId}}/show?selectedNodeId={{display.id}}" target="_blank" class="dropdown-item">
								<i class="fad fa-pencil"></i> Edit in Advice Builder
							</a>
							<a href="https://app.justgoodadvice.com/advicesets/{{advice._id}}/rules/{{display.ruleId}}/debug" class="dropdown-item" data-action="openDebugWithQuerystring">
								<i class="fad fa-debug"></i> Debug
							</a>
							<a href="https://app.justgoodadvice.com/_/advice/widget/{{advice.id}}/_/01111J/" class="dropdown-item" data-action="openClassicWithQuerystring">
								<i class="fad fa-comments"></i> Classic
							</a>
							<div class="dropdown-divider"></div>
							<div class="dropdown-header">DEVELOPERS</div>
							<a href="{{advice.apiUrl}}" class="dropdown-item" target="_blank">
								<i class="fad fa-code"></i> Open API
							</a>
						</div>
					</div>
				</header>
				
				<hr>
				<form data-id="{{display.id}}">

					<div class="form-group">

						{{#display.form.fieldType_isRadio}}
						
							{{#display.form.values}}
								<div class="custom-control custom-radio">
									<input type="radio" name="{{display.form.name}}" value="{{value}}" id="{{id}}" class="custom-control-input">
									<label class="custom-control-label" for="{{id}}">{{label}}
									{{#helpText}}
									<small class="form-text text-muted">{{helpText}}</small>
									{{/helpText}}
									</label>
								</div>
							{{/display.form.values}}

						{{/display.form.fieldType_isRadio}}

						{{#display.form.fieldType_isBoolean}}
						
							<div class="custom-control custom-radio">
								<input type="radio" name="{{display.form.name}}" value="true" id="yes_{{display.id}}" class="custom-control-input">
								<label class="custom-control-label" for="yes_{{display.id}}">Yes</label>
							</div>
							<div class="custom-control custom-radio">
								<input type="radio" name="{{display.form.name}}" value="false" id="no_{{display.id}}" class="custom-control-input">
								<label class="custom-control-label" for="no_{{display.id}}">No</label>
							</div>

						{{/display.form.fieldType_isBoolean}}

						{{#display.form.fieldType_isNumber}}
						
							<label for="{{id}}">{{label}}</label>
							<input type="text" class="form-control" id="{{id}}" name="{{display.form.name}}">

						{{/display.form.fieldType_isNumber}}

						{{#display.form.fieldType_isPercent}}
						
							<label for="{{id}}">{{label}}</label>
							<input type="text" class="form-control" id="{{id}}" name="{{display.form.name}}">

						{{/display.form.fieldType_isPercent}}

					</div>

					<div class="continue">
						{{^display._isFirst}}
							<a href="#" class="btn btn-outline-primary" data-action="back">Back</a>
						{{/display._isFirst}}
						<button type="submit" data-id="{{display.id}}" class="btn btn-primary">Next</button>
					</div>
				</form>
			</div>
		</script>

		<script id="tmpl_adviceAdvice" type="x-tmpl-mustache">
			<header class="d-flex justify-content-between icon-row">
				<h3>{{display.headline}}</h3>
				<div class="dropdown">
					<a class="btn btn-sm btn-light" href="#" role="button" id="dropdownMenuLink{{display.id}}" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
						<i class="far fa-ellipsis-h"></i>
					</a>

					<div class="dropdown-menu" aria-labelledby="dropdownMenuLink{{display.id}}">
						<div class="dropdown-header">ADVICE BUILDER</div>
						<a href="https://app.justgoodadvice.com/advicesets/{{advice._id}}/rules/{{display.ruleId}}/show?selectedNodeId={{display.id}}" target="_blank" class="dropdown-item">
							<i class="fad fa-pencil"></i> Edit in Advice Builder
						</a>
						<a href="https://app.justgoodadvice.com/advicesets/{{advice._id}}/rules/{{display.ruleId}}/debug" class="dropdown-item" data-action="openDebugWithQuerystring">
							<i class="fad fa-debug"></i> Debug
						</a>
						<a href="https://app.justgoodadvice.com/_/advice/widget/{{advice.id}}/_/01111J/" class="dropdown-item" data-action="openClassicWithQuerystring">
							<i class="fad fa-comments"></i> Classic
						</a>
						<div class="dropdown-divider"></div>
						<div class="dropdown-header">DEVELOPERS</div>
						<a href="{{advice.apiUrl}}" class="dropdown-item" target="_blank">
							<i class="fad fa-code"></i> Open API
						</a>
					</div>
				</div>
			</header>

			<hr>
			<p class="">
				{{#display.summary}}
					{{display.summary}}
				{{/display.summary}}
				{{^display.summary}}
					<span class="text-muted"><em>No summary provided.</em></span>
				{{/display.summary}}
			</p>
			{{#display.actions}}
				<div><a href="{{url}}" target="_blank" class="btn btn-sm btn-primary">{{name}}</a></div>
			{{/display.actions}}
		</script>
		
		<script>window.jga=window.jga||{};window.jga.api = <%- JSON.stringify(api.data) %>;</script>
		<script src="/jquery/dist/jquery.min.js" type="text/javascript"></script>
		<script src="/bootstrap/dist/js/bootstrap.bundle.min.js" type="text/javascript"></script>
		<script src="/numeral/min/numeral.min.js" type="text/javascript"></script>
		<script src="/dist/js/main.js" type="text/javascript"></script>
  </body>
</html>
