<!DOCTYPE html>
<html>
  <head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title><%= api.data.advice.title %> - <%= api.data.advice.owner.name %></title>
		<meta name="description" content="<%= api.data.advice.description %>">

		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="application-name" content="Just Good Advice">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-title" content="Just Good Advice">
		<meta name="robots" content="index,follow">
		<meta name="google" content="nositelinkssearchbox">

		<link rel="stylesheet" href="/dist/css/main.css" />
		
		<!--favicons-->
		<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
		<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
		<link rel="manifest" href="/site.webmanifest">
		<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#6d256c">
		<meta name="msapplication-TileColor" content="#ffffff">
		<meta name="theme-color" content="#ffffff">
		<script>window.jga=window.jga||{};window.jga.config={web_host:"<%= locals.WEB_HOST %>",api_host:"<%= locals.API_HOST %>",api_key:"<%= locals.API_KEY %>"};</script>
  </head>
  <body class="showcase showcase--advice">

		<header class="banner bg-stripes">
			<img src="/img/logo_white.svg" height="28">
		</header>

		<div class="container-fluid mt-4">
			<div class="row">
				<div class="col-3 advice-set-details">Loading...</div>
				<div class="col-7">
					<div class="row no-gutters">
						<div class="col-8 rounded bg-white p-2">
							<div class="advice"></div>
							<div class="mt-5">
								<small><a href="/s/<%= api.data.advice.id %>" class="btn btn-link btn-sm"><i class="fad fa-redo-alt"></i> start over</a></small>
								<!--
								<small>
									<pre><%- JSON.stringify(api.data.display,null,2) %></pre>
								</small>-->
							</div>
						</div>
						<div class="col-4">
							<div class="assumptions-container bg-white rounded">
								<ul class="answers list-unstyled"></ul>
								<hr>
								<table class="table table-borderless table-hover table-sm">
									<thead>
										<tr>
											<th>Parameter</th>
											<th class="text-right">Vaue</th>
										</tr>
									</thead>
									<tbody class="variables"></tbody>
								</table>
							</div>
						</div>
					</div>
				</div>

				<div class="col-3">
				</div>
			</div>
		</div>

		<!--templates-->
		<script id="tmpl_adviceSetDetails" type="x-tmpl-mustache">
			<div class="by">By {{advice.owner.name}}</div>
			<h2>{{advice.title}}</h2>
			<p class="lead">{{advice.description}}</p>
			<h6>Category & Tags</h6>
			<ul class="list-unstyled tagged">
				<li><a href="#" target="_blank"><i class="fad fa-album-collection"></i> {{advice.category}}</a></li>
				{{#advice.tags}}
					<li><a href="https://app.justgoodadvice.com/library/search?advicebuilder_updatedAt%5BrefinementList%5D%5BentityType.displayName%5D%5B0%5D=Advice%20Set&advicebuilder_updatedAt%5BrefinementList%5D%5Badviceset.tags.name%5D%5B0%5D={{.}}" target="_blank"><i class="fad fa-tag"></i> {{.}}</a></li>
				{{/advice.tags}}
			</ul>
			<h6>Reference Documents</h6>
			<ul class="list-unstyled refdocs">
				{{#advice.referenceDocuments}}
					<li><a href="{{url}}" target="_blank"><i class="fad fa-file"></i> {{name}}</a></li>
				{{/advice.referenceDocuments}}
			</ul>

			<div>
				<a href="https://app.justgoodadvice.com/advicesets/{{advice.id_without_ownerId}}/open-editor" target="_blank" class="btn btn-sm btn-outline-primary"><i class="fad fa-tools"></i> Advice Builder</a>
			</div>
		</script>

		<script id="tmpl_interimAdviceList" type="x-tmpl-mustache">
			<h6>Recommendations</h6>
			<ul class="advice-list recommendations fa-ul">
			{{#list_advice.ungrouped}}
				<li data-id="{{id}}" data-idx="{{idx}}">
					<span class="fa-li">
						<a href="https://app.justgoodadvice.com/advicesets/{{advice.id_without_ownerId}}/rules/{{expand.ruleId}}/show?selectedNodeId={{id}}" target="_blank">
							<i class="fad fa-thumbs-up"></i>
						</a>
					</span>
					{{question}}
				</li>
			{{/list_advice.ungrouped}}
			</ul>

			{{#list_advice.ToDo.length}}
				<h6>To-Do</h6>
				<ul class="advice-list todo fa-ul">
				{{#list_advice.ToDo}}
					<li data-id="{{id}}" data-idx="{{idx}}">
						<span class="fa-li">
							<a href="https://app.justgoodadvice.com/advicesets/{{advice.id_without_ownerId}}/rules/{{expand.ruleId}}/show?selectedNodeId={{id}}" target="_blank">
								<i class="far fa-circle"></i> 
							</a>
						</span>
						{{question}}
					</li>
				{{/list_advice.ToDo}}
			{{/list_advice.ToDo.length}}
			</ul>

			{{#list_advice.Completed.length}}
				<h6>Completed</h6>
				<ul class="advice-list completed fa-ul">
				{{#list_advice.Completed}}
					<li data-id="{{id}}" data-idx="{{idx}}">
						<span class="fa-li">
							<a href="https://app.justgoodadvice.com/advicesets/{{advice.id_without_ownerId}}/rules/{{expand.ruleId}}/show?selectedNodeId={{id}}" target="_blank">
								<i class="far fa-check-circle"></i> 
							</a>
						</span>
						{{question}}
					</li>
				{{/list_advice.Completed}}
			{{/list_advice.Completed.length}}
			</ul>
			<hr>
		</script>

		<script id="tmpl_answersList" type="x-tmpl-mustache">
			{{#answers}}
				<li data-id="{{id}}" data-idx="{{idx}}" class="qa position-relative">
					<div class="q">{{question}}</div>
					<div class="a"><a href="#" class="stretched-link">{{value}}</a></div>
				</li>
			{{/answers}}
		</script>

		<script id="tmpl_variablesList" type="x-tmpl-mustache">
			{{#variables}}
				<tr>
					<td>
						{{^nameAlt}}
							{{name}}
						{{/nameAlt}}
						{{#nameAlt}}
							{{nameAlt}}
						{{/nameAlt}}
					</td>
					<td class="text-right">
						{{^format}}
							{{value}}
						{{/format}}
						{{#format}}
							{{valueF}}
						{{/format}}
					</td>
				</tr>
			{{/variables}}
		</script>

		<script id="tmpl_adviceInputRequest" type="x-tmpl-mustache">
			<header class="d-flex justify-content-end icon-row">
				<div class="dropdown">
					<a class="" href="#" role="button" id="dropdownMenuLink{{display.id}}" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
						<i class="fad fa-ellipsis-h"></i>
					</a>

					<div class="dropdown-menu" aria-labelledby="dropdownMenuLink{{display.id}}">
						<a href="https://app.justgoodadvice.com/advicesets/{{advice.id_without_ownerId}}/rules/{{display.ruleId}}/show?selectedNodeId={{display.id}}" target="_blank" class="dropdown-item">
							<i class="fad fa-pencil"></i> Edit in Advice Builder
						</a>
						<a href="{{advice.apiUrl}}" class="dropdown-item" target="_blank">
							<i class="fad fa-code"></i> Open API
						</a>
					</div>
				</div>
			</header>

			<div class="interimAdvice"></div>

			<h3>{{display.question}}</h3>
			<hr>
			<form data-id="{{display.id}}">
			{{#display.explanation}}
				<p class="lead">{{display.explanation}}</p>
			{{/display.explanation}}

			<div class="form-group">

				{{#display.form.fieldType_isRadio}}
				
					{{#display.form.values}}
						<div class="custom-control custom-radio">
							<input type="radio" name="{{display.form.name}}" value="{{value}}" id="{{id}}" class="custom-control-input">
							<label class="custom-control-label" for="{{id}}">{{label}}
							{{#helpText}}
							<small class="form-text text-muted">{{helpText}}</small>
							{{/helpText}}
							</label>
						</div>
					{{/display.form.values}}

				{{/display.form.fieldType_isRadio}}

				{{#display.form.fieldType_isBoolean}}
				
					<div class="custom-control custom-radio">
						<input type="radio" name="{{display.form.name}}" value="true" id="yes_{{display.id}}" class="custom-control-input">
						<label class="custom-control-label" for="yes_{{display.id}}">Yes</label>
					</div>
					<div class="custom-control custom-radio">
						<input type="radio" name="{{display.form.name}}" value="false" id="no_{{display.id}}" class="custom-control-input">
						<label class="custom-control-label" for="no_{{display.id}}">No</label>
					</div>

				{{/display.form.fieldType_isBoolean}}

				{{#display.form.fieldType_isNumber}}
				
					<label for="{{id}}">{{label}}</label>
					<input type="text" class="form-control" id="{{id}}" name="{{display.form.name}}">

				{{/display.form.fieldType_isNumber}}

				{{#display.form.fieldType_isPercent}}
				
					<label for="{{id}}">{{label}}</label>
					<input type="text" class="form-control" id="{{id}}" name="{{display.form.name}}">

				{{/display.form.fieldType_isPercent}}

			</div>

			<div class="continue">
				<button type="submit" data-id="{{display.id}}" class="btn btn-primary">OK <i class="fad fa-arrow-right"></i></button>
			</div>
			</form>
		</script>

		<script id="tmpl_adviceAdvice" type="x-tmpl-mustache">
			<header class="d-flex justify-content-end icon-row">
				<div class="dropdown">
					<a class="" href="#" role="button" id="dropdownMenuLink{{display.id}}" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
						<i class="fad fa-ellipsis-h"></i>
					</a>

					<div class="dropdown-menu" aria-labelledby="dropdownMenuLink{{display.id}}">
						<a href="https://app.justgoodadvice.com/advicesets/{{advice.id_without_ownerId}}/rules/{{display.ruleId}}/show?selectedNodeId={{display.id}}" target="_blank" class="dropdown-item">
							<i class="fad fa-pencil"></i> Edit in Advice Builder
						</a>
						<a href="{{advice.apiUrl}}" class="dropdown-item" target="_blank">
							<i class="fad fa-code"></i> Open API
						</a>
					</div>
				</div>
			</header>

			<div class="interimAdvice"></div>

			<h3>{{display.headline}}</h3>
			<hr>
			<p class="">
				{{#display.summary}}
					{{display.summary}}
				{{/display.summary}}
				{{^display.summary}}
					<span class="text-muted"><em>No summary provided.</em></span>
				{{/display.summary}}
			</p>
			{{#display.actions}}
				<div><a href="{{url}}" target="_blank" class="btn btn-sm btn-primary">{{name}}</a></div>
			{{/display.actions}}
		</script>
		
		<script>window.jga=window.jga||{};window.jga.api = <%- JSON.stringify(api.data) %>;</script>
		<script src="/jquery/dist/jquery.min.js" type="text/javascript"></script>
		<script src="/bootstrap/dist/js/bootstrap.bundle.min.js" type="text/javascript"></script>
		<script src="/numeral/min/numeral.min.js" type="text/javascript"></script>
		<script src="/dist/js/main.js" type="text/javascript"></script>
  </body>
</html>
